(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function format(e,n,o){var t,r;return o=o||{},o.expiresIn=o.expiresIn||0,t=e+"=",t+=n||"",0!==o.expiresIn&&(r=new Date,r.setTime(r.getTime()+o.expiresIn),t+="; expires="+r.toGMTString()),t+=o.domain?"; domain="+o.domain:"",t+=o.path?"; path="+o.path:"",e?t:""}function datas(){var e,n,o,t,r,a,s;if(e={},n=[],o=[],r=document.cookie)for(a=r.split(";"),t=0;t<a.length;t++)s=a[t].split("="),s[0]&&(s[0]=decodeURIComponent(s[0]).replace(/(^\s+)|(\s+$)/g,""),s[1]=decodeURIComponent(s[1]).replace(/(^\s+)|(\s+$)/g,""),n.push(s[0]),o.push(s[1]),e[s[0]]=s[1]);return{hashes:e,keys:n,values:o}}var adgCookie={get:function(e){var n,o;return n=new RegExp("; "+encodeURIComponent(e)+"(=([^;]*))?;"),o=("; "+document.cookie+";").match(n),o?decodeURIComponent(o[2]):""},set:function(e,n,o){var t;return e=e?encodeURIComponent(e):"",n=n?encodeURIComponent(n):"",t=format(e,n,o),document.cookie=t,t},clear:function(e,n){var o;return n=n||{},n.expiresIn=-1e3,o=e?format(encodeURIComponent(e),"",n):"",document.cookie=o,o},hashes:function(){return datas().hashes},keys:function(){return datas().keys},values:function(){return datas().values}};module.exports=adgCookie;

},{}],2:[function(require,module,exports){
var adgDevice={isSupported:function(){return window.postMessage&&window.JSON},UA:window.navigator.userAgent.toLowerCase(),isSP:function(){return adgDevice.isIOS()||adgDevice.isAndroid()},isPC:function(){return!adgDevice.isSP()},isIOS:function(){return/(iphone|ipad|ipod)/.test(adgDevice.UA)},isSafari:function(){return/safari/.test(adgDevice.UA)},isIOSWebView:function(){return adgDevice.isIOS()&&!adgDevice.isSafari()&&!window.navigator.standalone},isAndroid:function(){return/android/.test(adgDevice.UA)},isAndroidChrome:function(){return adgDevice.isAndroid()&&/chrome/.test(adgDevice.UA)&&!/version/.test(adgDevice.UA)},isFixedDevices:function(){var e=!1;if(adgDevice.isIOS())e=/crios/.test(adgDevice.UA)||!adgDevice.lowerIPhone(7);else if(e=adgDevice.isAndroidChrome()){var i=adgDevice.UA.substr(adgDevice.UA.indexOf("chrome")+7,2);e=parseFloat(i)>26}else e=!adgDevice.lowerAndroid(4);return e},isTablet:function(){var e=/ipad|sc-01c|sc-02d/.test(adgDevice.UA);return e||/android/.test(adgDevice.UA)&&!/mobile/.test(adgDevice.UA)},lowerAndroid:function(e){var i=adgDevice.UA.substr(adgDevice.UA.indexOf("android")+8,3);return adgDevice.isAndroid()&&parseFloat(i)<e},lowerIPhone:function(e){var i=adgDevice.UA.substr(adgDevice.UA.indexOf("os ")+3,3);return adgDevice.isIOS()&&parseFloat(i.replace("_","."))<e},getOrientationEvent:function(){return adgDevice.isAndroid()?"resize":"orientationchange"}};module.exports=adgDevice;

},{}],3:[function(require,module,exports){
(function (global){
global.adgEventGlobalNameSpace=global.adgEventGlobalNameSpace||{};var adgEvent={once:function(e,a,n,t){e&&t&&!global.adgEventGlobalNameSpace[e]&&(adgEvent.add(a,n,t),global.adgEventGlobalNameSpace[e]=t)},removeFromOnces:function(e,a,n){e&&global.adgEventGlobalNameSpace[e]&&(adgEvent.remove(a,n,global.adgEventGlobalNameSpace[e]),global.adgEventGlobalNameSpace[e]=void 0)},add:function(e,a,n){e&&a&&n&&(window.attachEvent?e.attachEvent("on"+a,n):e.addEventListener(a,n,!1))},remove:function(e,a,n){e&&a&&n&&(window.detachEvent?e.detachEvent("on"+a,n):e.removeEventListener(a,n))},create:function(e,a,n,t){var o=document.createEvent("Event");return o.initEvent(e,a,n),o.detail=t,o},dispatch:function(e,a){a instanceof window.Event&&("complete"!==document.readyState?adgEvent.add(window,"load",function(){e.dispatchEvent(a)}):e.dispatchEvent(a))}};module.exports=adgEvent;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
function isSupported(){var o=!!window.JSON;return o||console.log("window.JSON not supported"),o}var adgJson={fromJson:function(o){var r={};try{isSupported()&&(r=window.JSON.parse(o)||{})}catch(n){console.log("JSON parse error")}return r},toJson:function(o){var r="";try{isSupported()&&(r=window.JSON.stringify(o)||"")}catch(n){console.log("JSON stringify error")}return r}};module.exports=adgJson;

},{}],5:[function(require,module,exports){
function listen(){$event.add(window,"message",function(e){var t=$json.fromJson(e.data);t.azsNct&&$cookie.set("azs-nct",t.azsNct,{expiresIn:31536e7,domain:isStaging()?".scaleout.jp":".socdm.com",path:"/"})})}function uidRequest(){var e="";$cookie.get("SOC")&&(e+="?u="+$cookie.get("SOC"),e+="&ut=1",e+="&st="+($device.isSP()?"0":"2"),request(azsDomain()+"/api/uid/v1/html"+e))}function request(e,t){var n=document.createElement("iframe");n.style.width="0",n.style.height="0",n.style.border="none",n.src=e||"",t&&$event.add(n,"load",function(){t(n)}),document.body.appendChild(n)}function isRequest(){var e=$cookie.get("azs-nct"),t=(new Date).getTime();return!e||t>e}function azsDomain(){return isStaging()?"https://stg.adc.auone.jp":"https://adc.auone.jp"}function isStaging(){return"bigman-test.scaleout.jp"===location.hostname}var $cookie=require("adg-script-modules/src/cookie"),$device=require("adg-script-modules/src/device"),$event=require("adg-script-modules/src/event"),$json=require("adg-script-modules/src/json");$event.add(window,"load",function(){isRequest()&&(listen(),uidRequest())});
},{"adg-script-modules/src/cookie":1,"adg-script-modules/src/device":2,"adg-script-modules/src/event":3,"adg-script-modules/src/json":4}]},{},[5]);
