(function(d,s,e,t){var element=d.createElement(s);element.type="text/java"+s;element.async="async";element.src="http"+("https:"===location.protocol?"s://s":"://")+"cdn.cxense.com/cx.cce.js";var tag=d.getElementsByTagName(s)[0];tag.parentNode.insertBefore(element,tag)})(document,"script");var cX=window.cX||{options:{}};cX.callQueue=cX&&cX.callQueue||[];cX.CCE=cX.CCE||{};cX.CCE.callQueue=cX.CCE.callQueue||[];if(["accounts.mainichi.jp","dev-accounts.mainichi.jp","stg-www.mainichi.jp","mainichi.jp"].indexOf(location.hostname)!==-1){cX.callQueue.push(["invoke",function(){var now=new Date;var datestr=now.getFullYear()+("0"+(now.getMonth()+1)).slice(-2)+("0"+now.getDate()).slice(-2)+("0"+now.getHours()).slice(-2);var url="";if(location.hostname=="stg-www.mainichi.jp"&&location.port&&location.port==="8443"){url="https://csm.cxpublic.com/Mainichi/domain/stg2021-www.mainichi.jp.js?"+datestr}else{url="https://csm.cxpublic.com/Mainichi/domain/"+location.hostname+".js?"+datestr}cX.loadScript(url,true,undefined,"cX_csd_domainScript")}])}(function(){if(_isRobot()){return}var cxIoScrollDepth=function(){var _instance;var _observer;var _dmpparams;var _targets={};var _dmptype="scroll";var _groups=["pos_in_page","pos_in_article"];var _init=function(dmpparams){if(!_observer&&window.IntersectionObserver){_observer=new IntersectionObserver(_ioCallback,{})}_dmpparams=dmpparams;return true};var _sendDMPEvent=function(pos,mode,prnd){var obj={events:[{type:_dmptype,rnd:cX.library._randomString(),siteId:cX.library.m_siteId,prnd:prnd,userIds:[{id:cX.getUserId(),type:"cx"}],origin:_dmpparams.origin,segmentIds:undefined,customParameters:[{group:mode==0?_groups[0]:_groups[1],item:String(pos)+"%",type:"string"}]}]};if(navigator.sendBeacon){navigator.sendBeacon("https://comcluster.cxense.com/dmp/push?persisted="+encodeURIComponent(_dmpparams.persistedQueryId),JSON.stringify(obj))}else{cX.jsonpRequest("https://comcluster.cxense.com/dmp/push?callback={"+"{callback}"+"}&persisted="+encodeURIComponent(_dmpparams.persistedQueryId)+"&json="+encodeURIComponent(cX.JSON.stringify(obj)))}};var _ioCallback=function(entries){entries.forEach(function(entry){if(entry.isIntersecting&&entry.target){var target=_targets[entry.target.id];if(target){_getSelectors(target.selector,target.rate).forEach(function(id){_sendDMPEvent(_targets[id].rate,_targets[id].mode,_targets[id].prnd);_observer.unobserve(_targets[id].element);_targets[id].element.parentNode.removeChild(_targets[id].element);delete _targets[id]})}}})};var _getSelectors=function(selector,rate){if(!rate){rate=100}var ids=[];Object.keys(_targets).forEach(function(k){if(_targets[k].selector===selector&&_targets[k].rate<=rate){ids.push(k)}});return ids};var _buildScrollRate=function(step){var scrollRate=[];var numSteps=Math.floor(100/step);for(var ii=1;ii<=numSteps;ii++){scrollRate.push(Math.floor(ii/numSteps*100))}return scrollRate};var _startTracking=function(mode,selector,frequency){if(_getSelectors(selector).length>0||!_observer){return}if(!frequency||isNaN(frequency)||(frequency<10||frequency>100)){frequency=25}var startY=0;var height=0;var el=document.querySelector(selector);switch(mode){case 0:selector="Page";height=document.documentElement.scrollHeight;break;case 1:if(el){startY=Math.floor(el.getBoundingClientRect().top+window.pageYOffset);height=Math.floor(el.getBoundingClientRect().height)}break;case 2:if(el){height=Math.floor(el.getBoundingClientRect().top+window.pageYOffset)}break}if(height!==0){var prnd=cX.library.m_rnd;_buildScrollRate(frequency).forEach(function(rate){var pos=Math.floor(height/100*rate)+startY;var id="cxscr_"+Math.random().toString(32).substring(2);document.body.insertAdjacentHTML("beforeend",'<div id="'+id+'" style="position:absolute;opacity:0;height:1px;top:'+pos+'px;"/>');_targets[id]={selector:selector,rate:rate,element:document.querySelector("#"+id),mode:mode,prnd:prnd};_observer.observe(_targets[id].element)})}};return{init:function(dmpparams,mode,selector,frequency){if(typeof dmpparams!=="object"){return}if(!_instance){_instance=_init(dmpparams)}if(mode===0||selector){(function(f){"loading"===document.readyState?window.addEventListener("load",f,false):f()})(function(){_startTracking(mode,selector,frequency)})}return _instance},getTargets:function(){return _targets},setType:function(type){if(typeof type==="string"){_dmptype=type}},setGroups:function(groups){if(groups instanceof Array&&groups.length===2){_groups=groups}}}}();window.cxIoScrollDepth=cxIoScrollDepth;function initCxScrollDepth(eventHandler,trackingMethod,selector,baselineDelay){var cxScrollDepth=function(){var cX=window.cX=window.cX||{};cX.callQueue=cX.callQueue||[];var _instance;var _eventHandler;var _element;var _resolution;var _prevVal;var _calcDepth;function _init(eventHandler,trackingMethod,selector,baselineDelay){_eventHandler=eventHandler;if(trackingMethod!=0){_element=document.querySelector(selector);if(!_element){return}}_resolution=25;_prevVal=0;switch(trackingMethod){case 0:_calcDepth=_calcDepth0;break;case 1:_calcDepth=_calcDepth1;break;default:_calcDepth=_calcDepth2;break}_startScrollDepthTracking(baselineDelay)}return{init:function(eventHandler,trackingMethod,selector,baselineDelay){_init(eventHandler,trackingMethod,selector,baselineDelay)}};function _calcDepth0(){var pos=cX.getScrollPos();var windowSize=cX.getWindowSize();var docSize=cX.getDocumentSize();var percentage=(pos.top+windowSize.height)/docSize.height*100;percentage=Math.ceil(percentage);if(percentage>100){percentage=100}var depth=Math.floor(percentage/_resolution);var reportVal=depth*_resolution;if(_prevVal<reportVal&&reportVal>=_resolution){for(var val=_prevVal+_resolution;val<reportVal;val+=_resolution){_eventHandler(val)}_eventHandler(reportVal);_prevVal=reportVal}}function _calcDepth1(){var pos=cX.getScrollPos();var windowSize=cX.getWindowSize();var bodyElementPos=cX.getElementPosition(_element);if(pos.top+windowSize.height>bodyElementPos.top){var percentage=(pos.top+windowSize.height-bodyElementPos.top)/_element.offsetHeight*100;percentage=Math.ceil(percentage);if(percentage>100){percentage=100}var depth=Math.floor(percentage/_resolution);var reportVal=depth*_resolution;if(_prevVal<reportVal&&reportVal>=_resolution){for(var val=_prevVal+_resolution;val<reportVal;val+=_resolution){_eventHandler(val)}_eventHandler(reportVal);_prevVal=reportVal}}}function _calcDepth2(){var pos=cX.getScrollPos();var windowSize=cX.getWindowSize();var bodyElementPos=cX.getElementPosition(_element);var percentage=(pos.top+windowSize.height)/bodyElementPos.top*100;percentage=Math.ceil(percentage);if(percentage>100){percentage=100}var depth=Math.floor(percentage/_resolution);var reportVal=depth*_resolution;if(_prevVal<reportVal&&reportVal>=_resolution){for(var val=_prevVal+_resolution;val<reportVal;val+=_resolution){_eventHandler(val)}_eventHandler(reportVal);_prevVal=reportVal}}function _onScroll(){if(_prevVal>=100)return;_calcDepth()}function throttle(func,wait){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}}function _startScrollDepthTracking(baselineDelay){if(baselineDelay>0){setTimeout(function(){_onScroll()},baselineDelay)}window.addEventListener("scroll",throttle(_onScroll,500),false)}}();if(document.readyState==="loading"){window.document.addEventListener("DOMContentLoaded",function(){cxScrollDepth.init(eventHandler,trackingMethod,selector,baselineDelay)})}else{cxScrollDepth.init(eventHandler,trackingMethod,selector,baselineDelay)}}var cxClickedAreaTracker=function(){try{var _reg=new RegExp("^https?://"+location.hostname);var _areaNameAttribute="data-cx-area";var _eventHandler;var _sendCnt=0;function _init(eventHandler){_eventHandler=eventHandler;_sendClickedArea(_eventHandler);_startTracking()}function _sendClickedArea(eventHandler){if(typeof localStorage==="object"&&typeof localStorage.getItem==="function"){var keyName="cx_clickedarea";var clickedArea=JSON.parse(localStorage.getItem(keyName));if(clickedArea){localStorage.removeItem(keyName);var lastClicked=clickedArea["time"]||0;var now=Math.round((new Date).getTime()/1e3);if(isFinite(lastClicked)&&lastClicked<=now&&lastClicked>now-30*60){eventHandler(clickedArea.area,clickedArea.url,_createCustomSendEvent(clickedArea.prnd))}}}}function _startTracking(){window.addEventListener("click",_onClickEvent,false)}function _createCustomSendEvent(prnd){return function(type,customParameters,providedArgs,segmentIds){customParameters=customParameters||{};var args=cX.library.combineArgs(cX.library.m_customEventAttributes||{},providedArgs||{});var identities=args.identities||[];if(!cX.Array.some(identities,function(id){return id.type==="cx"})){identities.push({id:cX.getUserId(),type:"cx"})}var apiFormattedCustomParameters=[];cX.Object.forEach(customParameters,function(value,name){apiFormattedCustomParameters.push({group:name,item:value,type:typeof value==="number"?"number":"string"})});var requestObject={events:[{type:type,rnd:cX.library._randomString(),siteId:cX.library.m_siteId,prnd:prnd,userIds:identities,origin:args.origin,segmentIds:segmentIds,customParameters:apiFormattedCustomParameters}]};var url="https://comcluster.cxense.com/dmp/push?callback={{callback}}"+"&persisted="+encodeURIComponent(args.persistedQueryId)+"&json="+encodeURIComponent(cX.JSON.stringify(requestObject));cX.jsonpRequest(url,function(){if(args.callback){args.callback()}},{synchronous:args.synchronous})}}function _onClickEvent(event){var ev=event||window.event;var href="";var isBlank=false;var areaName="";if(ev){var el=ev.target||ev.srcElement;for(var i=0;i<15&&el&&el.nodeName.toLowerCase()!=="body";i++){if(!areaName){areaName=_getAreaName(el,el.parentNode?el.parentNode.childNodes:[])}if(el.nodeType===1&&el.nodeName.toLowerCase()==="a"&&typeof el.href==="string"){if(_isTargetBlank(el)){isBlank=true}if(typeof el.href==="string"){href=el.href}}el=el.parentNode}if(isBlank&&href&&_sendCnt==0){_eventHandler(areaName,href.substr(0,256),_createCustomSendEvent(cX.library.m_rnd));_sendCnt++}else if(href&&areaName){if(typeof localStorage==="object"&&typeof localStorage.setItem==="function"){var now=Math.round((new Date).getTime()/1e3);localStorage.setItem("cx_clickedarea",JSON.stringify({time:now,area:areaName,prnd:cX.library.m_rnd}))}}}return true}function _isTargetBlank(el){return el.getAttribute("target")&&el.getAttribute("target").toLowerCase()=="_blank"}function _getAreaName(el,neighborNodes){var areaName="";if(el.getAttribute(_areaNameAttribute)){areaName=el.getAttribute(_areaNameAttribute)}return areaName}return{init:function(eventHandler){_init(eventHandler)}}}catch(e){}}();function _isRobot(){var robot_strings=["preview","phantomjs","spider","crawl","cxense","slurp","read ahead agent"];var re_bot=/\bbot|bot\b/;var ua=navigator.userAgent.toLowerCase();if(re_bot.test(ua)){return true}else{for(var i=0;i<robot_strings.length;i++){if(ua.indexOf(robot_strings[i])!=-1){return true}}}return ua.indexOf("mozilla")==0&&ua.indexOf(" ")==-1}var _cXcustom=function(){(window.cXcustom.q=window.cXcustom.q||[]).push(arguments);_queueExecute()};_cXcustom.q=window.cXcustom&&window.cXcustom.q?window.cXcustom.q:[];window.cXcustom=_cXcustom;_queueExecute();function _queueExecute(){while(window.cXcustom.q&&window.cXcustom.q.length>0){var command=window.cXcustom.q.shift();try{if(command[0]==="scrollDepth"){var sl=command[3];if(sl){command[4]==true?sl="."+sl:sl="#"+sl}initCxScrollDepth(command[1],command[2],sl,command[5])}else if(command[0]==="scrollDepth2"){initCxScrollDepth(command[1],command[2],command[3],command[4])}else if(command[0]==="scrollDepth3"){cxIoScrollDepth.init(command[1],command[2],command[3])}else if(command[0]==="clickedTracker"){cxClickedAreaTracker.init(command[1])}}catch(e){}}}})();(function(d,s,e,t){var element=d.createElement(s);element.type="text/java"+s;element.async="async";element.src="https://cdn.cxense.com/track_banners_init.js";var tag=d.getElementsByTagName(s)[0];tag.parentNode.insertBefore(element,tag)})(document,"script");var cxCategoryMapping={m010000019:"政治",m010000022:"政治",m010000030:"政治",m010000038:"政治",m010000039:"政治",m010000047:"政治",m010000052:"政治",m010000067:"政治",m020000014:"経済",m020000017:"経済",m020000037:"経済",m020000038:"経済",m020000048:"経済",m020000052:"経済",m020000054:"経済",m020000056:"経済",m030000014:"国際",m030000015:"国際",m030000020:"国際",m030000043:"国際",m030000044:"国際",m040000003:"社会",m040000015:"社会",m040000021:"社会",m040000022:"社会",m040000024:"社会",m040000029:"社会",m040000038:"社会",m040000042:"社会",m040000049:"社会",m040000050:"社会",m040000054:"社会",m040000067:"社会",m040000071:"社会",m040000081:"社会",m040000090:"社会",m040000094:"社会",m040000097:"社会",m040000098:"社会",m040000121:"社会",m040000124:"社会",m040000126:"社会",m040000127:"社会",m040000129:"社会",m040000132:"社会",m040000137:"社会",m040000139:"社会",m040000143:"社会",m040000145:"社会",m040000152:"社会",m040000156:"社会",m040000166:"社会",m040000176:"社会",m040000194:"社会",m040000201:"社会",m040000207:"社会",m040000208:"社会",m040000209:"社会",m050000001:"スポーツ",m050000003:"スポーツ",m050000004:"スポーツ",m050000005:"スポーツ",m050000006:"スポーツ",m050000009:"スポーツ",m050000010:"スポーツ",m050000014:"スポーツ",m050000015:"スポーツ",m050000017:"スポーツ",m050000018:"スポーツ",m050000020:"スポーツ",m050000021:"スポーツ",m050000022:"スポーツ",m050000024:"スポーツ",m050000026:"スポーツ",m050000029:"スポーツ",m050000030:"スポーツ",m050000031:"スポーツ",m050000032:"スポーツ",m050000033:"スポーツ",m050000034:"スポーツ",m050000037:"スポーツ",m050000039:"スポーツ",m050000041:"スポーツ",m050000042:"スポーツ",m050000044:"スポーツ",m050000049:"スポーツ",m050000050:"スポーツ",m050000051:"スポーツ",m050000054:"スポーツ",m050000057:"スポーツ",m050000058:"スポーツ",m050000059:"スポーツ",m050000060:"スポーツ",m050000061:"スポーツ",m050000063:"スポーツ",m050000068:"スポーツ",m050000069:"スポーツ",m050000070:"スポーツ",m050000071:"スポーツ",m050000074:"スポーツ",m050000075:"スポーツ",m050000077:"スポーツ",m050000078:"スポーツ",m050000079:"スポーツ",m050000080:"スポーツ",m050000082:"スポーツ",m050000083:"スポーツ",m050000084:"スポーツ",m050000087:"スポーツ",m050000089:"スポーツ",m050000093:"スポーツ",m050000094:"スポーツ",m050000095:"スポーツ",m050000099:"スポーツ",m050000100:"スポーツ",m050000101:"スポーツ",m050000102:"スポーツ",m050000103:"スポーツ",m050000104:"スポーツ",m050000105:"スポーツ",m050000106:"スポーツ",m050000107:"スポーツ",m050000108:"スポーツ",m050000109:"スポーツ",m050000110:"スポーツ",m050000111:"スポーツ",m050000112:"スポーツ",m060000001:"人事・訃報",m060000002:"人事・訃報",m070000001:"コラム",m070000002:"コラム",m100000006:"暮らし",m100000007:"暮らし",m100000009:"暮らし",m100000011:"暮らし",m100000014:"暮らし",m100000020:"暮らし",m100000022:"暮らし",m100000023:"暮らし",m100000029:"暮らし",m100000030:"暮らし",m100000033:"暮らし",m100000038:"暮らし",m100000060:"暮らし",m100000061:"暮らし",m200000002:"芸能",m200000004:"芸能",m200000007:"芸能",m200000012:"芸能",m200000020:"芸能",m200000022:"芸能",m200000031:"芸能",m200000040:"芸能",m200000041:"芸能",m200000042:"芸能",m200000043:"芸能",m200000044:"芸能",m200000045:"芸能",m200000046:"芸能",m200000047:"芸能",m200000048:"芸能",m200000049:"芸能",m200000050:"芸能",m200000051:"芸能",m300000004:"IT",m300000012:"IT",m300000015:"IT",m300000026:"IT",m300000027:"IT"};
//# sourceMappingURL=Mainichi.js.map