/*! built at Thu Oct 15 2020 00:45:17 GMT+0000 (Coordinated Universal Time) */!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=10)}([function(e,t,i){"use strict";i.r(t),t.default={inherit:function(e,t){if(Object.create)e.prototype=Object.create(t.prototype);else{var i=function(){};i.prototype=t.prototype,e.prototype=new i}e.prototype.constructor=e,e.super_=t},isInherited:function(e,t){for(var i=e;;){if(i===t)return!0;if(!i.super_)return!1;i=i.super_}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)},forEach:function(e,t,i){if(e.forEach)e.forEach(t,i);else for(var n=0;n<e.length;n++)t.call(i,e[n],n,e)},map:function(e,t,i){if(e.map)return e.map(t,i);for(var n=[],r=0;r<e.length;r++)n.push(t.call(i,e[r],r,e));return n},filter:function(e,t,i){if(e.filter)return e.filter(t,i);for(var n=[],r=0;r<e.length;r++){t.call(i,e[r],r,e)&&n.push(e[r])}return n},forEachHash:function(e,t,i){for(var n in e)e.hasOwnProperty(n)&&t.call(i,n,e[n],e)},extend:function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e},makeRandomString:function(){return Math.floor(1e9*Math.random()).toString(32)}}},function(e,t,i){"use strict";i.r(t);var n=i(0),r=function(){try{window.top.document}catch(e){return window}return window.top}(),o=r.document;function a(e){this.top=e.top,this.left=e.left,e.width?(this.width=e.width,this.height=e.height,this.bottom=this.top+this.height,this.right=this.left+this.width):(this.bottom=e.bottom,this.right=e.right,this.width=this.right-this.left,this.height=this.bottom-this.top)}function s(e){return e.ownerDocument.defaultView||e.ownerDocument.parentWindow}function l(e){return function(e){return e.currentStyle||s(e).getComputedStyle(e,"")}(e).overflow.indexOf("scroll")>=0}function h(e,t,i){t=t||0,i=i||0;for(var n,r=0,o=0,l=e;;)try{var h=s(l).frameElement;if(!h)break;var c=h.getBoundingClientRect();r+=c.top,o+=c.left,l=h}catch(l){break}try{n=e.getBoundingClientRect()}catch(e){n={top:0,left:0,bottom:0,right:0}}return new a({top:Math.round(n.top+i+r),left:Math.round(n.left+t+o),bottom:Math.round(n.bottom+i+r),right:Math.round(n.right+t+o)})}function c(){var e=r.innerWidth||o.documentElement.clientWidth,t=r.innerHeight||o.documentElement.clientHeight,i=0,n=0;return o.body&&(i=o.body.scrollLeft||o.documentElement.scrollLeft,n=o.body.scrollTop||o.documentElement.scrollTop),new a({top:Math.round(n),left:Math.round(i),width:Math.round(e),height:Math.round(t)})}function u(){var e=o.body.scrollLeft||o.documentElement.scrollLeft,t=o.body.scrollTop||o.documentElement.scrollTop;return{left:Math.round(e),top:Math.round(t)}}function d(e,t,i){this.elem=e,this.zeroSizeViewableMode=i&&i.zeroSizeViewableMode,this.trimmedRect=null,t&&(this.trimmedRect=t)}a.prototype.toString=function(){return"Rect W:"+this.width+" H:"+this.height+" T:"+this.top+" L:"+this.left+" B:"+this.bottom+" R:"+this.right},a.prototype.transfer=function(e,t){this.left+=e,this.right+=e,this.top+=t,this.bottom+=t},a.prototype.copy=function(){return new a(this)},a.prototype.getOverlappedArea=function(e){var t=Math.max(this.top,e.top),i=Math.min(this.bottom,e.bottom),n=Math.max(this.left,e.left),r=Math.min(this.right,e.right);return new a(i-t>0&&r-n>0?{top:t,bottom:i,left:n,right:r}:{top:0,bottom:0,left:0,right:0})},d.prototype.calcLayoutPosition=function(){var e=[],t=u(),i=t.top,n=t.left;function o(t){for(var r=t;(r=r.parentNode)!==r.ownerDocument.body;)l(r)&&(e.unshift(r),i+=r.scrollTop,n+=r.scrollLeft)}o(this.elem);for(var a=s(this.elem);a!=r;){e.unshift(a.frameElement);var c=u();i+=c.top,n+=c.left,o(a.frameElement),a=a.parent}this.layoutPosition=h(this.elem,n,i),this.scrollParents=e},d.prototype.getLayoutPosition=function(e){return!e&&this.layoutPosition||this.calcLayoutPosition(),this.layoutPosition},d.prototype.getViewableRect=function(){try{this.calcLayoutPosition()}catch(e){return new a({top:0,bottom:0,left:0,right:0})}var e=c(),t=n.default.map(this.scrollParents,(function(e){return e}));t.push(this.elem);for(var i=null,r=e,o=0;o<t.length;o++){if(i=h(t[o],e.left,e.top),this.zeroSizeViewableMode){var s=0===i.width?1:i.width,l=0===i.height?1:i.height;i=new a({top:i.top,left:i.left,width:s,height:l})}if(0===(r=r.getOverlappedArea(i)).width||0===r.height)break}if(this.trimmedRect){var u=this.trimmedRect.copy();return u.transfer(i.left,i.top),r.getOverlappedArea(u)}return r},t.default={Rect:a,traverseAllWindows:function(e,t){(function t(i){if(!e(i))return!1;for(var n=i.frames,r=0;r<n.length;r++){var o=n[r];try{o.document.URL}catch(e){continue}if(!t(o))return!1}return!0})(t=t||r)},getElementRect:function(e){var t=e.getBoundingClientRect();return new a({top:Math.round(t.top),left:Math.round(t.left),bottom:Math.round(t.bottom),right:Math.round(t.right)})},getViewedRect:c,getPageSize:function(){var e=0,t=0;return o.body&&(t=o.body.scrollWidth||o.documentElement.scrollWidth,e=o.body.scrollHeight||o.documentElement.scrollHeight),{width:Math.round(t),height:Math.round(e)}},getScreenSize:function(){var e=r.innerWidth||o.documentElement.clientWidth,t=r.innerHeight||o.documentElement.clientHeight;return{width:Math.round(e),height:Math.round(t)}},getScrollPos:u,ElementPosition:d,getTopWindow:function(){return r},getBoundingClientRectAsRect:h,isIframeCrossDomain:function(e){var t=null;try{t=(e.contentWindow.document||e.contentDocument).body.innerHTML}catch(e){}return null===t},getAdElements:function(e){var t=[];if(n.default.forEach(e.getElementsByTagName("*"),(function(e){null!==e.getAttribute("data-ydntxt-item")&&t.push(e)})),t.length>0)return t;var i=e.getElementsByTagName("a");return n.default.forEach(i,(function(e){null!==e.href.match(/https?:\/\/rd\.ane\.yahoo\.co\.jp\//)&&t.push(e)})),t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7);t.default=function(e,t,i){var r={tk:"b4db4bd2-193f-49c8-b029-1504f702baf5",p:"uadf",d:"sampling_beacon"};r.adprodset=e;var o=n.parse(t);r.pv=o.pv,r.rand=o.rand,r.vi=o.vi.substring(0,10),"1"==o.measurable?r.type="m":"0"==o.measurable?r.type="nm":r.type="v",r.tm=(new Date).getTime(),r.aux=i,document.createElement("img").src="https://dsb.yahoo.co.jp/api/v1/clear.gif?"+n.stringify(r)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),r=function(){function e(e,t){var i=this;t=t||n.default,this.config=t,window.YJ_UADF&&window.YJ_UADF.bucketManager&&"number"==typeof window.YJ_UADF.bucketManager.selectValue&&(e=window.YJ_UADF.bucketManager.selectValue),this.selectValue=e,this.activeFeatures=[];this.selected={},Object.keys(t).forEach((function(n){i.selected[n]=function(e,t){for(var i=0,n=0;n<e.length;++n)if(0<=e[n].rate&&e[n].rate<1&&t<(i+=e[n].rate))return n;return-1}(t[n],e)}))}return e.prototype.getBucket=function(e){var t={name:"default",rate:1};if(!e)return t;var i=e.split("-")[0];if(!this.config[i]||-1===this.selected[i])return t;var n=this.selected[i];return this.config[i][n]},e.prototype.getBucketName=function(e){return this.getBucket(e).name},e.prototype.isFeatureEnabled=function(e,t){if(window.YJ_UADF&&window.YJ_UADF.bucketManager&&window.YJ_UADF.bucketManager.features&&window.YJ_UADF.bucketManager.features.some((function(e){return e.toLowerCase()===t.toLowerCase()})))return!0;var i=this.getBucket(e);return!!i.features&&i.features.some((function(e){return e===t}))},e.prototype.enableFeature=function(e){this.activeFeatures.push(e)},e.prototype.isSamplingBeaconTarget=function(e){return!!this.getBucket(e).beacontarget},e.prototype.getSamplingBeaconData=function(e,t,i){var n=this.getBucket(e);if(!n.beacondata)return"";try{return n.beacondata(t,i)}catch(e){return"error"}},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=function(){function e(e){this.detector=e,this.setMessageEventHandler()}return e.prototype.handleVImpsMode=function(e){return 0!==e},e.prototype.notifyRendered=function(e){if(e.viewableUrl&&this.detector.beaconSenderForViewableBeacon.setUri(e.viewableUrl),e.measurableUrl?(this.detector.beaconSenderForMeasurableBeacon.setUri(e.measurableUrl),this.detector.beaconSenderForMeasurableBeacon.setAllowed()):this.detector.beaconSenderForMeasurableBeacon.setDisallowed(),this.handleVImpsMode(e.vimpsMode)){this.detector.beaconSenderForViewableBeacon.setAllowed();var t=n.default.getTopWindow();if("multi"===e.type){var i=e.parentIdList;r.default.forEach(i,(function(i,n){var r=t.document.getElementById(i)||window.document.getElementById(i);if(!r&&e.fif&&(r=e.fif.contentDocument.getElementById(i)),r){var o=e.viewableInfoList&&e.viewableInfoList[n]||null;this.detector.collectTextAdsIn(r,e.adProdSetCode,e.requestId,o,e.viewableMethod)}}),this)}else if("single_with_parent"===e.type){var o=e.parentId,a=t.document.getElementById(o)||window.document.getElementById(o);!a&&e.fif&&(a=e.fif.contentDocument.getElementById(o)),a&&this.detector.collectTextAdsIn(a,e.adProdSetCode,e.requestId,e.viewableInfo,e.viewableMethod)}else"doc_write"===e.type?this.detector.collectTextAdsIn(e.docWriteCaller.parentNode,e.adProdSetCode,e.requestId,e.viewableInfo,e.viewableMethod):"stream"===e.type?e.viewableInfo&&this.detector.registerTargetProxyForStream(e.adProdSetCode,e.requestId,e.viewableInfo):"timeline"===e.type?this.detector.registerTargetProxyForTimeline(e.uniqueId,e.adNum,e.adProdSetCode,e.requestId,e.viewableInfo):"richad"===e.type&&r.default.forEach(e.parentIdList,(function(i,n){this.detector.collectRichAdsIn(t.document,i,e.adProdSetCode,e.viewableInfo)}),this);this.detector.sendMeasurableBeacon(e.viewableInfoList||e.viewableInfo,e.adProdSetCode)}else this.detector.sendNonMeasurableBeacon(e.viewableInfoList||e.viewableInfo,e.adProdSetCode)},e.prototype.notifyStreamAttached=function(e,t){this.detector.notifyStreamAttached(e,t)},e.prototype.notifyTimelineAttached=function(e,t,i,n,r){this.detector.notifyTimelineAttached(e,t,i,n,r)},Object.defineProperty(e.prototype,"messageEventHandlers",{get:function(){return{frameStarted:{method:this.handleFrameStartedMessage},frameLoaded:{method:this.handleFrameLoadedMessage},frameScrolled:{method:this.handleFrameScrolledMessage},frameUpdateCallbackElement:{method:this.handleFrameUpdateCallbackElement}}},enumerable:!0,configurable:!0}),e.prototype.setMessageEventHandler=function(){var e=this,t=function(t){e.handleMessageEvent(t)},i=n.default.getTopWindow();i.addEventListener?i.addEventListener("message",t,!1):i.attachEvent("onmessage",t)},e.prototype.handleMessageEvent=function(e){if(("http://i.yimg.jp"===e.origin||"https://s.yimg.jp"===e.origin||/\.yahoo\.co\.jp(:[0-9]+)?$/.test(e.origin))&&r.default.isString(e.data)){var t=e.data.split(","),i=t[0],n=this.messageEventHandlers[i];n&&n.method.call(this,t,e)}},e.prototype.detectMessagedFrame=function(e){var t=n.default.getTopWindow(),i=null;return n.default.traverseAllWindows((function(t){for(var n=t.document.getElementsByTagName("iframe"),r=0;r<n.length;r++)if(n[r].contentWindow===e)return i=n[r],!1;return!0}),t),i},e.prototype.handleFrameStartedMessage=function(e,t){if(3===e.length){var i=parseInt(e[1],10);if(!isNaN(i))if(this.handleVImpsMode(i)){var n=this.detectMessagedFrame(t.source);if(n){var r=e[2];this.detector.registerFrameNotifyingTargets(r,n)}}}},e.prototype.handleFrameLoadedMessage=function(e,t){var i=parseInt(e[1],10);if(!isNaN(i)){var n=e[5],o=e[6];o&&this.detector.beaconSenderForViewableBeacon.setUri(o),n?(this.detector.beaconSenderForMeasurableBeacon.setUri(n),this.detector.beaconSenderForMeasurableBeacon.setAllowed()):this.detector.beaconSenderForMeasurableBeacon.setDisallowed();var a=e[2];if(this.handleVImpsMode(i)){this.detector.beaconSenderForViewableBeacon.setAllowed();var s=this.detectMessagedFrame(t.source);if(s){var l=e[3];if("non_ydn"!==l){if(0!==e[4].indexOf("ERR")){var h=e[4].split("|");r.default.forEach(h,(function(e,t){var i=this.parseViewableInfo(e);if(i){var n=i[0],r=i[1],o={canDuplicate:!0,tagId:a,requestId:l,rank:t+1,viewableInfo:n};r&&(o.trimmedRect=r),this.detector.registerTarget(s,o),this.detector.sendMeasurableBeacon(n,a)}}),this)}}else this.detector.registerTarget(s,{tagId:a,requestId:l,rank:"1",viewableInfo:"non_ydn"})}}else r.default.forEach(e[4].split("|"),(function(e){var t=this.parseViewableInfo(e);if(t){var i=t[0];this.detector.sendNonMeasurableBeacon(i,a)}}),this)}},e.prototype.parseViewableInfo=function(e){var t=e.split("/");if(5!==t.length)return null;var i=parseInt(t[0],10),r=parseInt(t[1],10),o=parseInt(t[2],10),a=parseInt(t[3],10);if(isNaN(i)||isNaN(r)||isNaN(o)||isNaN(a))return null;var s=t[4]&&0!==t[4].length?t[4]:null;return 0===i&&0===r&&0===o&&0===a?[s,null]:[s,new n.default.Rect({top:i,right:r,bottom:o,left:a})]},e.prototype.markAdsForDebug=function(){this.detector.markAdsForDebug()},e.prototype.handleFrameScrolledMessage=function(e,t){var i=e[4].split("|");r.default.forEach(i,(function(e){var t=this.parseViewableInfo(e);if(t){var i=t[0],n=t[1];this.detector.updateTargetRect(n,i)}}),this)},e.prototype.handleFrameUpdateCallbackElement=function(e,t){var i=e[1].split("/");if(4===i.length){var r=parseInt(i[0],10),o=parseInt(i[1],10),a=parseInt(i[2],10),s=parseInt(i[3],10);if(!(isNaN(r)||isNaN(o)||isNaN(a)||isNaN(s))){var l=new n.default.Rect({top:r,right:o,bottom:a,left:s}),h=this.detectMessagedFrame(t.source);if(h)for(var c=0;c<this.detector.frameNotifyingTargets.length;c++)if(this.detector.frameNotifyingTargets[c].rawElement==h){this.detector.frameNotifyingTargets[c].updateRect(l);break}}}},e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.enabled=!1}return e.prototype.enable=function(){this.enabled=!0},e.prototype.setDebugStyle=function(e){var t=this;if(this.enabled){e.rawElement.querySelectorAll("*");var i,n=e.rawElement.getAttribute("data-rma-viewable"),r=/^https:\/\/m\.yahoo\.co\.jp\/.*/.test(location.href);i=n||r?e.rawElement.parentElement:e.rawElement,e.viewedEnoughTime?i.style.outline="6px green outset":i.style.outline="6px red outset",i.style.outlineOffset="-3px",window.requestAnimationFrame((function(){return t.displayCenterPoint(e)}))}},e.prototype.displayCenterPoint=function(e){var t=this,i=e.getCenterPoints()[0],n=e.viewedEnoughTime?"green":"red";if(!e.debugCenterElement){var r=document.createElement("div");r.style.width="5px",r.style.height="5px",r.style.zIndex="999",r.style.backgroundColor=n,r.style.position="fixed",r.style.top=i.top+1+"px",r.style.left=i.left+1+"px",e.debugCenterElement=r,document.body.appendChild(r)}i.top<=0||i.left<=0?e.debugCenterElement.style.display="none":(e.debugCenterElement.style.display="block",e.debugCenterElement.style.backgroundColor=n,e.debugCenterElement.style.top=i.top+1+"px",e.debugCenterElement.style.left=i.left+1+"px"),window.requestAnimationFrame((function(){return t.displayCenterPoint(e)}))},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={}},function(e,t,i){"use strict";t.decode=t.parse=i(8),t.encode=t.stringify=i(9)},function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,o){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=e.length;l>0&&h>l&&(h=l);for(var c=0;c<h;++c){var u,d,p,f,g=e[c].replace(s,"%20"),m=g.indexOf(i);m>=0?(u=g.substr(0,m),d=g.substr(m+1)):(u=g,d=""),p=decodeURIComponent(u),f=decodeURIComponent(d),n(a,p)?r(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,i){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,i,s){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(n(a))+i;return r(e[a])?o(e[a],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[a]))})).join(t):s?encodeURIComponent(n(s))+i+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var a=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},function(e,t,i){"use strict";i.r(t);var n=function(e){this.baseTime=e,this.incrementedKey=0,this.data={}};n.prototype.getElapsedTime=function(){return(new Date).getTime()-this.baseTime},n.prototype.getAutoIncrementedKey=function(){return++this.incrementedKey},n.prototype.set=function(e,t){this.data[e]=t},n.prototype.get=function(e){return this.data[e]};var r=n,o=i(0),a=i(1),s=function(e){this.pollInterval=e,this.targets=[],this.timer=null,this.activeNums=0};s.prototype.start=function(){var e=this,t=a.default.getTopWindow();this.timer=t.setInterval((function(){e.poll()}),this.pollInterval)},s.prototype.stop=function(){a.default.getTopWindow().clearInterval(this.timer),this.timer=null},s.prototype.poll=function(){var e=(new Date).getTime();o.default.forEach(this.targets,(function(t){t.active&&e-t.lastFiredAt>=t.interval&&(t.method.call(t.context,"Polling"),t.lastFiredAt=e)}),this)},s.prototype.registerHandler=function(e,t,i){var n={active:!1,interval:e,context:t,method:i,lastFiredAt:(new Date).getTime(),lazyCounter:0},r=this.targets.length;return this.targets.push(n),r},s.prototype.activateHandler=function(e){this.targets[e].active=!0,0===this.activeNums&&this.start(),this.activeNums++},s.prototype.deactivateHandler=function(e){this.targets[e].active=!1,this.activeNums--,0===this.activeNums&&this.stop()};var l=function(e,t){this.manager=e,this.context=t.context,this.method=t.method,this.name=t.name||this.method.name||"UNNAMED",this.events=t.events||[],this.polling=t.polling||-1,this.minInterval=t.minInterval||0,this.lastFiredAt=0,this.eventKeys=[],this.pollingKey=-1,this.registerHandlers()};l.prototype.registerHandlers=function(){o.default.forEach(this.events,(function(e){var t=this.manager.getEvent(e),i=t.registerHandler(this,this.fire);this.eventKeys.push({event:t,key:i})}),this),this.polling>=0&&(this.pollingKey=this.manager.poller.registerHandler(this.polling,this,this.fire)),this.activate()},l.prototype.activate=function(){o.default.forEach(this.eventKeys,(function(e){e.event.activateHandler(e.key)}),this),this.pollingKey>=0&&this.manager.poller.activateHandler(this.pollingKey)},l.prototype.deactivate=function(){o.default.forEach(this.eventKeys,(function(e){e.event.deactivateHandler(e.key)}),this),this.pollingKey>=0&&this.manager.poller.deactivateHandler(this.pollingKey)},l.prototype.fire=function(e,t){var i=(new Date).getTime(),n=!1;if((0===this.minInterval||0===this.lastFiredAt||i-this.lastFiredAt>this.minInterval)&&(n=!0),n){var r=t||{};this.lastFiredAt=i;var o=i-this.manager.baseTime;this.method.call(this.context,o,e,r)}};var h=function(e){this.baseTime=e,this.poller=new s(50),this.events={}};function c(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)}function u(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i)}h.prototype.newAction=function(e){return new l(this,e)},h.prototype.getEvent=function(e){if(this.events[e])return this.events[e];if(!v[e])return null;var t=new v[e](this);return this.events[e]=t,t};var d=function(){this.eventName="",this.handlers=[],this.activeNums=0};d.prototype.registerHandler=function(e,t){var i={active:!1,context:e,method:t},n=this.handlers.length;return this.handlers.push(i),n},d.prototype.activateHandler=function(e){this.handlers[e].active=!0,0===this.activeNums&&this.setup(),this.activeNums++},d.prototype.deactivateHandler=function(e){this.handlers[e].active=!1,this.activeNums--,0===this.activeNums&&this.cleanup()},d.prototype.setup=function(){},d.prototype.fire=function(e){o.default.forEach(this.handlers,(function(t){t.active&&t.method.call(t.context,this.eventName,e)}),this)},d.prototype.cleanup=function(){};var p=function(){d.apply(this,arguments),this.eventName="onLoad"};o.default.inherit(p,d),p.prototype.setup=function(){var e=this,t=a.default.getTopWindow();this.boundHandler=function(t){e.fire({nativeEvent:t})},c(t,"load",this.boundHandler,!1)},p.prototype.cleanup=function(){u(a.default.getTopWindow(),"load",this.boundHandler,!1)};var f=function(){d.apply(this,arguments),this.eventName="viewPosChange"};o.default.inherit(f,d),f.prototype.setup=function(){var e=this,t=a.default.getTopWindow();this.nativeWrapper=function(t){e.nativeHandler({nativeEvent:t})},c(t,"scroll",this.nativeWrapper,!1),c(t,"touchmove",this.nativeWrapper,!1)},f.prototype.fireManually=function(){var e={nativeEvent:{}};e.rect=a.default.getViewedRect(),this.fire(e)},f.prototype.nativeHandler=function(e){var t=a.default.getViewedRect();e.rect=t,this.lastViewedRect?(t.width!==this.lastViewedRect.width||t.height!==this.lastViewedRect.height||Math.abs(t.top-this.lastViewedRect.top)>=this.changeThreshold||Math.abs(t.left-this.lastViewedRect.left)>=this.changeThreshold)&&(this.fire(e),this.lastViewedRect=t):(this.fire(e),this.lastViewedRect=t)},f.prototype.changeThreshold=50,f.prototype.cleanup=function(){var e=a.default.getTopWindow();u(e,"scroll",this.nativeWrapper,!1),u(e,"touchmove",this.nativeWrapper,!1)};var g,m,v={onLoad:p,viewPosChange:f},y=h,b=(g=new r((new Date).getTime()),m=new y(g.baseTime),g.set("eventManager",m),{getMaster:function(){return g}}),w=function(){this.dataSize=0,this.parent=null};w.prototype.incrementSize=function(e){this.dataSize+=e,this.parent&&this.parent.incrementSize(e)},w.prototype.decrementSize=function(e){this.dataSize-=e,this.parent&&this.parent.decrementSize(e)},w.prototype.getDataSize=function(){return this.dataSize},w.prototype.exports=function(){};var I=function(e,t){w.apply(this,arguments),this.value=t?e:encodeURIComponent(e),this.incrementSize(this.value.length)};function S(e){return e instanceof w?e:o.default.isString(e)||o.default.isNumber(e)?new I(e.toString()):null}o.default.inherit(I,w),I.prototype.exports=function(){return this.value};var E=function(e){w.apply(this,arguments),this.sep=encodeURIComponent(e),this.children=[]};o.default.inherit(E,w),E.prototype.exports=function(){return o.default.map(this.children,(function(e){return e.exports()}),this).join(this.sep)},E.prototype.push=function(e){var t=S(e);this.children.length>0&&this.incrementSize(this.sep.length),this.incrementSize(t.dataSize),this.children.push(t),t.parent=this},E.prototype.clear=function(){this.children=[],this.dataSize=0};var T=function(e,t){this.options=t||{},this.definition={},this.exportOrder=[],this.staticValueNums=0,this.staticValueSize=0,o.default.forEach(e,(function(e){e._encodedKey=encodeURIComponent(e.key),"static"===e.type&&(e._encodedValue=encodeURIComponent(e.value),this.staticValueSize+=e._encodedKey.length,this.staticValueSize+=1,this.staticValueSize+=e._encodedValue.length,this.staticValueNums>0&&(this.staticValueSize+=1),this.staticValueNums++),this.definition[e.name]=e,this.exportOrder.push(e.name)}),this)};T.prototype.getInstance=function(){return new A(this)},T.prototype.isDefinedVar=function(e){return this.definition[e]&&"var"===this.definition[e].type},T.prototype.getStaticValueSize=function(){return this.staticValueSize},T.prototype.setLazyStaticValue=function(e,t){var i=this.definition[e];i._encodedValue&&(this.staticValueSize-=i._encodedKey.length,this.staticValueSize-=1,this.staticValueSize-=i._encodedValue.length,i._encodedValue=null,this.staticValueNums-=1,0!==this.staticValueNums&&(this.staticValueSize-=1)),t&&(i._encodedValue=encodeURIComponent(t),this.staticValueSize+=i._encodedKey.length,this.staticValueSize+=1,this.staticValueSize+=i._encodedValue.length,this.staticValueNums>0&&(this.staticValueSize+=1),this.staticValueNums++)};var A=function(e){this.template=e,this.vars={}};A.prototype.bind=function(e,t,i){var n;n=i?new I(t,!0):S(t),this.template.isDefinedVar(e)&&(this.vars[e]=n)},A.prototype.exports=function(){var e="";return o.default.forEach(this.template.exportOrder,(function(t){var i=this.template.definition[t];"static"===i.type&&(e.length>0&&(e+="&"),e+=i._encodedKey+"="+i._encodedValue),"lazy-static"===i.type?i._encodedValue&&(e.length>0&&(e+="&"),e+=i._encodedKey+"="+i._encodedValue):"random"===i.type?(e.length>0&&(e+="&"),e+=i._encodedKey+"="+o.default.makeRandomString()):"var"===i.type&&this.vars[t]&&(e.length>0&&(e+="&"),e+=i._encodedKey+"="+this.vars[t].exports())}),this),e};var M=E,V=T,k=function(e,t){this.rawElement=e,this.trimmedRect=t&&t.trimmedRect?t.trimmedRect:null,this.zeroSizeViewableMode=t&&t.zeroSizeViewableMode;var i={zeroSizeViewableMode:this.zeroSizeViewableMode};this.position=new a.default.ElementPosition(this.rawElement,this.trimmedRect,i),this.layoutPosition=this.position.getLayoutPosition(),this.lastViewedIn=!1,this.lastViewedStart=0,this.currentViewedTime=0,this.viewedEnoughTime=!1,this.notifiedOnce=!1,this.resizeCheckCount=0,this.viewInTimes=[],this.viewOutTimes=[],this.options=t,this.tagId=t.tagId,this.requestId=t.requestId,this.rank=t.rank,this.viewableInfo=t.viewableInfo,this.exclusiveId=t.exclusiveId,this.query=t.query||{},this.detector=t.detector,this.rawElement&&this.rawElement.getAttribute("data-ydnnoad")&&(this.isNoObstruction=!0)};k.prototype.VIEWED_TIME_CONDITION=1e3,k.prototype.VIEWED_AREA_CONDITION=.5,k.prototype.isBeaconedTarget=function(){return this.viewedEnoughTime&&!this.notifiedOnce},k.prototype.setAsNotified=function(){this.notifiedOnce=!0},k.prototype.checkEfpFunction=function(){var e=0,t=[],i=this.rawElement.getBoundingClientRect(),n={top:Math.round((i.top+i.bottom)/2),left:Math.round((i.left+i.right)/2)},r={top:i.top+1,left:i.left+1,right:i.right-1,bottom:i.bottom-1};return t.push(document.elementFromPoint(r.left,r.top)),t.push(document.elementFromPoint(r.right,r.top)),t.push(document.elementFromPoint(r.left,r.bottom)),t.push(document.elementFromPoint(r.right,r.bottom)),t.push(document.elementFromPoint(n.left,n.top)),o.default.forEach(t,(function(t){null!==t&&e++}),this),e>=3},k.prototype.calcViewableArea=function(e,t){var i=this.position.getViewableRect(),n=i.width*i.height;if(0===n)return 0;var r=this.trimmedRect?this.trimmedRect:a.default.getElementRect(this.rawElement);if(this.zeroSizeViewableMode){var o=0===r.width?1:r.width,s=0===r.height?1:r.height;r=new a.default.Rect({top:r.top,left:r.left,width:o,height:s})}var l=r.width*r.height,h=e.width*e.height;return 0===l||0===h?0:n/Math.min(l,h)},k.prototype.isAdIframe=function(e,t){var i=t||1;if(i>10)return!0;if(a.default.isIframeCrossDomain(e))return e===this.rawElement;var n=(e.contentDocument||e.contentWindow.document).body,r=[];if(o.default.forEach(n.getElementsByTagName("iframe"),(function(e){this.isAdIframe(e,i+1)&&r.push(e)}),this),r.length>0)return!0;if(o.default.forEach(n.getElementsByTagName("*"),(function(e){null!==e.getAttribute("data-ydntxt-item")&&r.push(e)})),r.length>0)return!0;var s=n.getElementsByTagName("a");return o.default.forEach(s,(function(e){null!==e.href.match(/https?:\/\/rd\.ane\.yahoo\.co\.jp\//)&&r.push(e)})),r.length>0},k.prototype.getCenterPoints=function(){var e=a.default.getBoundingClientRectAsRect(this.rawElement,0,0);if(this.trimmedRect){var t=this.trimmedRect.copy();t.transfer(e.left,e.top),e=t}var i=[];e.height%2==0?(i.push(e.height/2),i.push(e.height/2-1)):i.push(Math.floor(e.height/2));var n=[];e.width%2==0?(n.push(e.width/2),n.push(e.width/2-1)):n.push(Math.floor(e.width/2));for(var r=[],o=0;o<n.length;++o)for(var s=0;s<i.length;++s)r.push({left:e.left+n[o],top:e.top+i[s]});return 4===r.length&&(r=[r[0],r[3]]),r},k.prototype.hasNoObstruction=function(){if(!(!this.options.viewableMethod||"getBoundingClientRect"===this.options.viewableMethod))return!0;if(!0===this.isNoObstruction)return!0;for(var e=this.getCenterPoints(),t=0;t<e.length;++t)if(this.hasNoObstructionAt(e[t].left,e[t].top))return!0;return!1},k.prototype.hasNoObstructionAt=function(e,t){var i=this,n=window.top.document.elementFromPoint(e,t);if(null===n)return!1;if("iframe"===n.nodeName.toLowerCase())return this.isAdIframe(n);for(var r=function(e){if(e!==i.rawElement)return!1;if(null!==e.getAttribute("data-ydntxt-item")||e.getAttribute("data-rma-viewable"))return!0;var t=e.getAttribute("href");return!(!t||null===t.match(/https?:\/\/rd\.ane\.yahoo\.co\.jp\//))},o=n;null!==o&&o.parentNode;){if(r(o))return!0;o=o.parentNode}for(var a=[{element:n,level:0}];a.length>0;){var s=a.shift();if(!(s.level>3)){if(r(s.element))return!0;for(var l=0;l<s.element.children.length;l++)a.push({element:s.element.children[l],level:s.level+1})}}return!1},k.prototype.checkVisibility=function(){return"hidden"===window.getComputedStyle(this.rawElement).visibility||document.hidden?(this.lastViewedIn=!1,this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.checkVisibility(), false",target:this}),!1):(this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.checkVisibility(), true",target:this}),!0)},k.prototype.check=function(e,t){var i;if(this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.check(), enter",target:this}),null!==this.position.trimmedRect){var n=this.position.trimmedRect.width*this.position.trimmedRect.height;if(!a.default.isIframeCrossDomain(this.rawElement)&&0===n&&this.resizeCheckCount<5){var r=this.rawElement.contentDocument||this.rawElement.contentWindow.document,o=a.default.getAdElements(r.body);o.length>=1&&(this.trimmedRect=a.default.getElementRect(o[0]),this.position.trimmedRect=this.trimmedRect),this.resizeCheckCount++}}if("IntersectionObserver"===this.options.viewableMethod)i=this.checkVisibility()&&this.rawElement.dataset.ydnintersectionratio&&this.rawElement.dataset.ydnintersectionratio>=this.VIEWED_AREA_CONDITION,this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.check(), ydnintersectionratio: ".concat(this.rawElement.dataset.ydnintersectionratio)});else if("elementFromPoint"===this.options.viewableMethod)i=this.checkVisibility()&&this.checkEfpFunction();else{var s=this.checkVisibility()?this.calcViewableArea(t):0;i=s>=this.VIEWED_AREA_CONDITION&&this.hasNoObstruction(),this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.check(), viewableArea: ".concat(s)})}this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.check(), nowViewdIn: ".concat(i)}),this.lastViewedIn&&i?this.handleViewContinue(e):this.lastViewedIn&&!i?this.handleViewOut(e):!this.lastViewedIn&&i&&this.handleViewIn(e),this.detector.debugLog(this.tagId,{msg:"YADSViewableTarget.check(), leave"})},k.prototype.handleViewIn=function(e){this.lastViewedIn=!0,this.lastViewedStart=e,this.currentViewedTime=0,this.viewInTimes.push(this.lastViewedStart)},k.prototype.handleViewContinue=function(){this.currentViewedTime=b.getMaster().getElapsedTime()-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&(this.viewedEnoughTime=!0)},k.prototype.handleViewOut=function(e){this.currentViewedTime=e-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&(this.viewedEnoughTime=!0),this.viewOutTimes.push(e),this.lastViewedIn=!1,this.lastViewedStart=0,this.currentViewedTime=0},k.prototype.updateRect=function(e){e&&(this.trimmedRect=e,this.position.trimmedRect=e)};var N=k,_=function(e,t){this.tagId=t.tagId,this.sendNumViewIn=0,this.sendNumViewable=0,this.sendNumViewOut=0,N.call(this,e,t)};o.default.inherit(_,N),_.prototype.sendNotification=function(e,t,i){var n=this.rawElement.contentWindow;if(n&&n.postMessage){var r="vimpsMessage,"+(t+","+i+","+e);n.postMessage(r,"*")}},_.prototype.handleViewIn=function(e){_.super_.prototype.handleViewIn.apply(this,arguments),this.sendNotification(e,"view-in",++this.sendNumViewIn)},_.prototype.handleViewContinue=function(e){var t=this.viewedEnoughTime;_.super_.prototype.handleViewContinue.apply(this,arguments),!t&&this.viewedEnoughTime&&this.sendNotification(e,"viewable",++this.sendNumViewable)},_.prototype.handleViewOut=function(e){_.super_.prototype.handleViewOut.apply(this,arguments),this.sendNotification(e,"view-out",++this.sendNumViewOut)},_.prototype.sendAbortMessage=function(){var e=this.rawElement.contentWindow;e.postMessage&&e.postMessage("vimpsMessage,aborted","*")};var C=_,R=function(e,t,i,n){this.tagId=e,this.requestId=t,this.rank=i,this.viewableInfo=n,this.targets=[]};R.prototype.setDummyTarget=function(e){this.targets.push(e)};var x=function(e,t){this.proxy=t.proxy,this.proxy.setDummyTarget(this),t.tagId=this.proxy.tagId,t.requestId=this.proxy.requestId,t.viewableInfo=this.proxy.viewableInfo,N.call(this,e,t)};o.default.inherit(x,N),x.prototype.isBeaconedTarget=function(){return this.viewedEnoughTime&&!this.proxy.notifiedOnce},x.prototype.setAsNotified=function(){this.proxy.notifiedOnce=!0},x.prototype.handleViewIn=function(){N.prototype.handleViewIn.apply(this,arguments)},x.prototype.handleViewOut=function(){N.prototype.handleViewOut.apply(this,arguments)};var D=function(e){this.uri=e.uri,this.requestType=e.requestType,this.beaconAllowed=!1};D.prototype.MAX_LENGTH_FOR_EACH_REQUEST=8e3,D.prototype.getQueryMaxLength=function(){return this.MAX_LENGTH_FOR_EACH_REQUEST-this.uri.length},D.prototype.doRequest=function(e){var t=this.getQueryMaxLength();e.length>t&&(e=e.substring(0,t));var i=this.uri;(e.length>0&&(i+="?"+e+"&EOQ"),"sendbeacon"===this.requestType&&window.navigator.sendBeacon)?window.navigator.sendBeacon(i)||(document.createElement("img").src=i):document.createElement("img").src=i},D.prototype.sendString=function(e,t){(t||this.beaconAllowed)&&this.doRequest(e)},D.prototype.setAllowed=function(){this.beaconAllowed=!0},D.prototype.setDisallowed=function(){this.beaconAllowed=!1},D.prototype.setUri=function(e){this.uri=e};var O=function(){this.data=new M(this.separator)};O.prototype.push=function(e){this.data.push(e)},O.prototype.getDataSize=function(){return this.data.getDataSize()},O.prototype.separator="&";var B=i(3),F=i.n(B),P=i(2),z=i.n(P),L=function(e){this.targetVisualizer=e,this.serialNumber=100,this.registerAllActions(),this.targets=[],this.viewedQueryTmpl=new V(this.viewedQueryTmplDef),this.requestIdTable={},this.targetProxies={},this.streamAttachedMessageStack=[],this.timelineTargetProxies={},this.timelineAttachedMessageStack=[],this.frameNotifyingTargets=[],this.pendingCollectingTextAdsIn={},this.alreadySentBeacon=[],this.beaconNum=0,this.beaconSenderForViewableBeacon=new D({uri:"https://b94.yahoo.co.jp/v",requestType:"sendbeacon"}),this.beaconSenderForMeasurableBeacon=new D({uri:"https://b94.yahoo.co.jp/m",requestType:"sendbeacon"}),this.pvRandom=o.default.makeRandomString(),this.viewedQueryTmpl.setLazyStaticValue("pvRandom",this.pvRandom),this.messageQueryTmpl=new V(this.messageQueryTmplDef),"IntersectionObserver"in window&&(this.iobserver=new IntersectionObserver(this.iObserverCallback,{threshold:function(){for(var e=[0],t=1;t<=100;t++)e.push(t/100);return e}()})),this.bucketManager=new F.a(Math.random()),this.debugLog=function(){}};L.prototype.registerAllActions=function(){o.default.forEachHash(this.actions,(function(e,t){var i=this.registerAction(e,t);this.actions[e]._registered=i}),this)},L.prototype.registerAction=function(e,t){var i={context:this,method:this[e],name:e,events:t.events,polling:t.polling,minInterval:t.minInterval};return b.getMaster().get("eventManager").newAction(i)},L.prototype.isCollectedElem=function(e){if(e.__uadfCollectedBy)for(var t=e.__uadfCollectedBy,i=0;i<t.length;i++)if(t[i]===this.serialNumber)return!0;return!1},L.prototype.setAsCollected=function(e){e.__uadfCollectedBy||(e.__uadfCollectedBy=[]),e.__uadfCollectedBy.push(this.serialNumber)},L.prototype.registerTarget=function(e,t){if(!this.isCollectedElem(e)||t&&t.canDuplicate){(t=t||{}).bucketManager=this.bucketManager,t.detector=this;var i=new N(e,t);return this.targets.push(i),this.setAsCollected(e),this.targetVisualizer.setDebugStyle(i),"IntersectionObserver"===t.viewableMethod&&this.iobserver.observe(e),i}return null},L.prototype.actions={checkViewableState:{events:["onLoad","viewPosChange"],polling:1e3,minInterval:100}},L.prototype.checkViewableState=function(e,t,i){var n=i.rect?i.rect:a.default.getViewedRect();o.default.forEach(this.targets,(function(t){t.check(e,n,this.debugLog)}),this),this.sendViewableBeacon(e,t,i),o.default.forEach(this.frameNotifyingTargets,(function(t){t.check(e,n,this.debugLog)}),this)},L.prototype._isSessionStorageAvailable=function(){try{return window.sessionStorage&&window.sessionStorage.getItem&&window.sessionStorage.setItem}catch(e){return!1}},L.prototype._storeSentViewableInfo=function(e,t){if(this._isSessionStorageAvailable()&&t){var i="";o.default.isArray(t)?(o.default.forEach(t,(function(e){i+=e.slice(0,64)+","})),i=i.slice(0,-1)):i=t.slice(0,64);var n=window.sessionStorage.getItem(e)||"",r=n?"".concat(n,",").concat(i):i;window.sessionStorage.setItem(e,r)}},L.prototype._isAlreadySent=function(e,t){if(!this._isSessionStorageAvailable())return!1;var i=window.sessionStorage.getItem(e)||"",n=t.slice(0,64);return-1!==i.indexOf(n)},L.prototype._sendMeasurableBeacon=function(e,t,i){var n=this;if(this.beaconSenderForMeasurableBeacon.beaconAllowed&&e&&("string"==typeof e&&(e=[e]),!((e=(e=function e(t){return t.reduce((function(t,i){return Array.isArray(i)?t.concat(e(i)):t.concat(i)}),[])}(e)).filter((function(e){return!n._isAlreadySent("measurable",e)}))).length<=0))){var r;this._storeSentViewableInfo("measurable",e);var a=navigator.userAgent;if(a.match(/MSIE/)||a.match(/Trident/)){var s=a.match(/(MSIE\s|rv:)([\d.]+)/)[2];r=s>=11?5e3:1500}else r=8e3;var l=function(e,r,o,a){var s=e.getInstance();s.bind("beaconType","5"),s.bind("seqNum",r),s.bind("elapsedTime",b.getMaster().getElapsedTime()),s.bind("measurable",t),s.bind("reportData",h.data);var l=s.exports();if(o.sendString(l),a.isSamplingBeaconTarget(i)){var c=n.bucketManager.getBucketName(i),u=n.bucketManager.getSamplingBeaconData(i,c);z()(i,l,u)}},h=new O;o.default.forEach(e,(function(e){"non_ydn"!==e&&(h.getDataSize()>0&&h.getDataSize()+e.length>=r&&(l(this.viewedQueryTmpl,++this.beaconNum,this.beaconSenderForMeasurableBeacon,this.bucketManager),h=new O),h.push(e))}),this),h.getDataSize()>0&&l(this.viewedQueryTmpl,++this.beaconNum,this.beaconSenderForMeasurableBeacon,this.bucketManager)}},L.prototype.sendMeasurableBeacon=function(e,t){this._sendMeasurableBeacon(e,"1",t)},L.prototype.sendNonMeasurableBeacon=function(e,t){this._sendMeasurableBeacon(e,"0",t)},L.prototype.registerTargetProxyForStream=function(e,t,i){var n=e.split("-")[0];this.targetProxies[n]||(this.targetProxies[n]=[],o.default.forEach(i,(function(i,r){var o=new R(e,t,r+1,i);this.targetProxies[n][r]=o}),this),this.procStreamAttachedMessage(n))},L.prototype.notifyStreamAttached=function(e,t){this.streamAttachedMessageStack.push([e,t]),this.procStreamAttachedMessage(e)},L.prototype.procStreamAttachedMessage=function(e){if(this.targetProxies[e]){for(var t=[];this.streamAttachedMessageStack.length>0;){var i=this.streamAttachedMessageStack.shift();i[0]===e?this.registerDummyTargetForStream(i[0],i[1]):t.push(i)}this.streamAttachedMessageStack=t}},L.prototype.registerDummyTargetForStream=function(e,t){var i=a.default.getTopWindow().document.getElementById(t);if(i){var n=Array.prototype.slice.apply(i.querySelectorAll(".yads_stream [data-ydntxt-item]"));for(var r in this.pendingCollectingTextAdsIn){if(this.pendingCollectingTextAdsIn.hasOwnProperty(r))(0,this.pendingCollectingTextAdsIn[r])()}o.default.forEach(n,(function(t,i){if(!this.isCollectedElem(t)){var n=this.targetProxies[e][i];if(n){var r=new x(t,{rank:i+1,proxy:n,bucketManager:this.bucketManager,detector:this});this.targets.push(r),this.targetVisualizer.setDebugStyle(r),this.setAsCollected(t)}}}),this)}},L.prototype.registerTargetProxyForTimeline=function(e,t,i,n,r){if(!this.timelineTargetProxies[e]){this.timelineTargetProxies[e]=[];for(var o=r||[],a=0;a<t;a++){var s=new R(i,n,a+1,o[a]);this.timelineTargetProxies[e][a]=s}this.procTimelineAttachedMessage(e)}},L.prototype.notifyTimelineAttached=function(e,t,i,n,r){this.timelineAttachedMessageStack.push([e,t,i,n,r]),this.procTimelineAttachedMessage(e)},L.prototype.procTimelineAttachedMessage=function(e){var t=this.timelineTargetProxies[e];if(t){for(;this.timelineAttachedMessageStack.length>0;){var i=this.timelineAttachedMessageStack.shift();if(i[0]===e){var n=i[3],r=i[4],o=t[n-1];if(!o)return;var a=new x(r,{rank:n,proxy:o,bucketManager:this.bucketManager,detector:this});this.targets.push(a),this.targetVisualizer.setDebugStyle(a),this.setAsCollected(r)}}this.timelineAttachedMessageStack=[]}},L.prototype.collectRichAdsIn=function(e,t,i,n){var r=this;function a(e){var t=1800,a=null;function s(){try{--t<=0&&clearInterval(a);var s=r.getRichAds(e);if(0===s.length)return;var l=0;o.default.forEach(s,(function(e){var t=n&&n[l]||null;r.registerTarget(e,{tagId:i,exclusiveId:i,viewableInfo:t,query:r.getRichAdsQuery(e)}),l++}),r),clearInterval(a)}catch(e){}}a=setInterval(s,100),s()}var s=e.getElementById(t);s?a(s):function(i){var n=30,r=null;function o(){try{--n<=0&&clearInterval(r);var o=e.getElementById(t);o&&(clearInterval(r),i(o))}catch(e){}}r=setInterval(o,100),o()}(a)},L.prototype.getRichAds=function(e){var t=[];return o.default.forEach(e.getElementsByTagName("*"),(function(e){null!==e.getAttribute("data-rma-viewable")&&t.push(e)})),t},L.prototype.getRichAdsQuery=function(e){return e?{getMainshrink:function(){return e.getAttribute("data-rma-mainshrink")},getSidehide:function(){return e.getAttribute("data-rma-sidehide")}}:{getMainshrink:function(){return null},getSidehide:function(){return null}}},L.prototype.collectTextAdsIn=function(e,t,i,n,r){var s=0,l=this,h=1800,c=null;function u(){try{--h<=0&&(delete l.pendingCollectingTextAdsIn[c],clearInterval(c));var u=a.default.getAdElements(e);if(0===u.length)return;o.default.forEach(u,(function(e){i in l.requestIdTable||(l.requestIdTable[i]=0);var o=++l.requestIdTable[i],a=n&&n[s]||null;l.registerTarget(e,{tagId:t,requestId:i,rank:o,viewableInfo:a,viewableMethod:r}),s++}),l),delete l.pendingCollectingTextAdsIn[c],clearInterval(c)}catch(e){}}c=setInterval(u,100),this.pendingCollectingTextAdsIn[c]=u,u()},L.prototype.getBeaconDataForTarget=function(e){return e.viewableInfo},L.prototype.sendViewableBeacon=function(e){if(this.beaconSenderForViewableBeacon.beaconAllowed){var t=[];o.default.forEach(this.targets,(function(e){if(e.isBeaconedTarget()&&-1===this.alreadySentBeacon.indexOf(e.exclusiveId)){this.targetVisualizer.setDebugStyle(e);var i=this.getBeaconDataForTarget(e);if(i&&!this._isAlreadySent("viewable",i)){e.exclusiveId&&this.alreadySentBeacon.push(e.exclusiveId);var n=null;e.query&&e.query.getMainshrink&&(n=e.query.getMainshrink());var r=null;e.query&&e.query.getSidehide&&(r=e.query.getSidehide()),e.setAsNotified(),t.push({viewableInfo:i,mainshrink:n,sidehide:r,target:e}),this._storeSentViewableInfo("viewable",i)}}}),this),t.length>0&&o.default.forEach(t,(function(t){if("non_ydn"!==t.viewableInfo){var i=new O;i.push(t.viewableInfo);var n=this.viewedQueryTmpl.getInstance();n.bind("reportData",i.data),n.bind("beaconType","2"),n.bind("seqNum",++this.beaconNum),n.bind("elapsedTime",e),t.mainshrink&&n.bind("mainshrink",t.mainshrink),t.sidehide&&n.bind("sidehide",t.sidehide);var r=n.exports();if(this.beaconSenderForViewableBeacon.sendString(r),this.bucketManager.isSamplingBeaconTarget(t.target.tagId)){var o=this.bucketManager.getBucketName(t.target.tagId),a=this.bucketManager.getSamplingBeaconData(t.target.tagId,o,t.target);z()(t.target.tagId,r,a)}}}),this)}},L.prototype.registerFrameNotifyingTargets=function(e,t){this.frameNotifyingTargets.push(new C(t,{tagId:e,bucketManager:this.bucketManager,detector:this}))},L.prototype.markAdsForDebug=function(){this.targetVisualizer.enable();var e=this;o.default.forEach(this.targets,(function(t){e.targetVisualizer.setDebugStyle(t)}))},L.prototype.updateTargetRect=function(e,t){o.default.forEach(this.targets,(function(i){i.viewableInfo===t&&i.updateRect(e)}),this),b.getMaster().get("eventManager").getEvent("viewPosChange").fireManually()},L.prototype.iObserverCallback=function(e){o.default.forEach(e,(function(e){e.target.dataset.ydnintersectionratio=e.intersectionRatio}))},L.prototype.enableDebugLog=function(e){"string"==typeof e&&(e=[e]);var t=console;this.debugLog=function(i,n){if(e.some((function(e){return 0==i.indexOf(e)}))){var r={adprodset:i,time:Date.now()};t.debug(Object.assign(r,n))}}};var j=[{name:"rs",type:"static",key:"rs",value:"yads_vb"},{name:"beaconType",type:"var",key:"bt"},{name:"pvRandom",type:"lazy-static",key:"pv"},{name:"beaconRandom",type:"random",key:"rand"},{name:"seqNum",type:"var",key:"seq"},{name:"elapsedTime",type:"var",key:"et"},{name:"retryNum",type:"var",key:"rn"},{name:"mainshrink",type:"var",key:"mainshrink"},{name:"sidehide",type:"var",key:"sidehide"},{name:"reportData",type:"var",key:"vi"},{name:"measurable",type:"var",key:"measurable"}];L.prototype.viewedQueryTmplDef=j,L.prototype.messageQueryTmplDef=j;var q=L,U=i(4),W=i.n(U),H=i(5),K=i.n(H);!function(e,t){var i;try{e.top.document;i=e.top}catch(t){i=e}i.YJ_UADF||(i.YJ_UADF={});var n=i.YJ_UADF;if(!(n&&n.YADSViewable&&n.YADSViewable.initialized)){var r=new K.a,o=new q(r),a=new W.a(o);n.YADSViewable={initialized:!0,notifyRendered:function(){a.notifyRendered.apply(a,arguments)},notifyStreamAttached:function(){a.notifyStreamAttached.apply(a,arguments)},notifyTimelineAttached:function(){a.notifyTimelineAttached.apply(a,arguments)},markAdsForDebug:function(){a.markAdsForDebug.apply(a,arguments)},enableDebugLog:function(e){o.enableDebugLog(e)}}}}(window)}]);